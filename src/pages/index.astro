---
import Layout from "../layouts/Layout.astro";
import Link from "../components/Link.astro";
import getAllBookRuleData, {
  rulePrimaryGroups,
} from "../utils/getAllBookRuleData";

const mgVbRulePages = await getAllBookRuleData({
  rulePath: rulePrimaryGroups.mgBv.path,
});
const mgPnRulePages = await getAllBookRuleData({
  rulePath: rulePrimaryGroups.mgPn.path,
});
const mgGdRulePages = await getAllBookRuleData({
  rulePath: rulePrimaryGroups.mgGd.path,
});
---

<Layout title="LZH Vinaya" isIndexPage>
  <main>
    <h1 class="text-6xl">LZH Vinaya Translations</h1>

    <h2 class="mt-12 text-4xl">
      {mgVbRulePages[0].school}
    </h2>

    <section class="mt-4 mb-8 lg:mt-6 lg:mb-10">
      <h3 class="text-2xl font-bold leading-8">
        <p class="">{rulePrimaryGroups.mgBv.name}</p>
      </h3>
      <ul class="my-4 text-xl md:columns-2 xl:columns-3 gap-8">
        {
          mgVbRulePages.map((rule) => (
            <li class="mb-4">
              <Link
                href={rulePrimaryGroups.mgBv.path + "/" + rule.file}
                text={rule.rule_class + " " + rule.rule_no}
              />
            </li>
          ))
        }
      </ul>
    </section>

    <section class="my-8 lg:my-10">
      <h3 class="text-2xl font-bold leading-8">
        <p class="">{rulePrimaryGroups.mgPn.name}</p>
      </h3>
      <ul class="my-4 text-xl md:columns-2 xl:columns-3 gap-8">
        {
          mgPnRulePages.map((rule) => (
            <li class="mb-4">
              <Link
                href={rulePrimaryGroups.mgPn.path + "/" + rule.file}
                text={rule.book.split(" ")[1] + " " + rule.rule_no}
              />
            </li>
          ))
        }
      </ul>
    </section>

    <section class="my-8 lg:my-10">
      <h3 class="text-2xl font-bold leading-8">
        <p class="">{rulePrimaryGroups.mgGd.name}</p>
      </h3>
      <ul class="my-4 text-xl md:columns-2 xl:columns-3 gap-8">
        {
          mgGdRulePages.map((rule) => (
            <li class="mb-4">
              <Link
                href={rulePrimaryGroups.mgGd.path + "/" + rule.file}
                text={rule.book + " " + rule.rule_no}
              />
            </li>
          ))
        }
      </ul>
    </section>
  </main>
</Layout>
